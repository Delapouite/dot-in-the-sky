# This file has been auto-generated by i3-config-wizard(1).
# It will not be overwritten, so edit it as you like.
# i3 config file (v4)
# Please see http://i3wm.org/docs/userguide.html for a complete reference!

font pango:DejaVu Sans Mono 10
# avoid black flash on new terminals
exec --no-startup-id xsetroot -solid "#282a36"

# use Mouse+$mod to drag floating windows
set $mod Mod4

# floating
floating_modifier $mod
floating_minimum_size 100 x 36
floating_maximum_size -1 x -1
for_window [instance="scratchpad"] move scratchpad ; scratchpad show
for_window [instance="floating-term"] floating enable, resize set 80ppt 40ppt, move position center
# toggle tiling / floating
bindsym $mod+space floating toggle
# change focus between tiling / floating windows
bindsym $mod+Shift+space focus mode_toggle

bindsym $mod+Escape kill
# hover window title
bindsym $mod+button2 kill

# mirror Kitty keybindings
bindsym $mod+F1 exec firefox-developer-edition 'https://i3wm.org/docs/userguide.html'
bindsym $mod+F2 exec kitty --single-instance 'kak' '~/.config/i3/config'
bindsym $mod+F5 reload

bindsym $mod+Return exec kitty --single-instance
bindsym $mod+BackSpace exec kitty --single-instance --directory $(xcwd)
bindsym $mod+backslash resize set width 30 ppt
bindsym $mod+s exec kitty --single-instance --name=scratchpad

bindsym $mod+p exec kitty --single-instance --class floating-term fish -c 'fz i3-windows'
bindsym $mod+minus exec kitty --single-instance --class floating-term fish -c browser-search
bindsym $mod+plus exec kitty --single-instance --class floating-term fish -c 'fz browser-bookmarks'

bindsym $mod+Shift+grave move scratchpad
bindsym $mod+grave scratchpad show

# change focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right
bindsym $mod+Prior focus parent
bindsym $mod+Next focus child

# move focused window
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right

bindsym --whole-window $mod+button9 move left
bindsym --whole-window $mod+button8 move right

# the first available screen of each list will be used
set $laptop_screens eDP-1
set $external_screens DP-1 HDMI-1

# change focus between screens
bindsym $mod+q focus output $laptop_screens
bindsym $mod+w focus output $external_screens

# move focused workspace between screens
bindsym $mod+Shift+q move workspace to output $laptop_screens
bindsym $mod+Shift+w move workspace to output $external_screens

# fullscreen
bindsym $mod+f fullscreen toggle
bindsym $mod+Shift+f fullscreen toggle global

# change container layout
bindsym $mod+z layout stacking
bindsym $mod+x layout tabbed
bindsym $mod+c layout splith
bindsym $mod+v layout splitv

# horizontal orientation is [][][]
bindsym $mod+Shift+c split h
bindsym $mod+Shift+v split v

# workspaces

bindsym $mod+Tab workspace back_and_forth
bindsym $mod+Left workspace prev
bindsym $mod+Right workspace next

bindsym $mod+1 workspace 1
bindsym $mod+2 workspace 2
bindsym $mod+3 workspace 3
bindsym $mod+4 workspace 4
bindsym $mod+5 workspace 5
bindsym $mod+6 workspace 6
bindsym $mod+7 workspace 7
bindsym $mod+8 workspace 8
bindsym $mod+9 workspace 9
bindsym $mod+0 workspace 10

bindsym $mod+Shift+1 move container to workspace 1
bindsym $mod+Shift+2 move container to workspace 2
bindsym $mod+Shift+3 move container to workspace 3
bindsym $mod+Shift+4 move container to workspace 4
bindsym $mod+Shift+5 move container to workspace 5
bindsym $mod+Shift+6 move container to workspace 6
bindsym $mod+Shift+7 move container to workspace 7
bindsym $mod+Shift+8 move container to workspace 8
bindsym $mod+Shift+9 move container to workspace 9
bindsym $mod+Shift+0 move container to workspace 10

# modes

bindsym $mod+o mode $openmode
set $openmode "open: vs[c]ode [e]macs [f]irefox [g]imp [k]akoune [i]nkscape [l]f nc[m]pcpp [n]ode [s]creenshot"
mode $openmode {
  bindsym o exec kitty --single-instance --class floating-term fish -c 'fz bins' ; mode default

  bindsym c exec code ; mode default
  bindsym e exec emacs --background-color '#282a36'; mode default
  bindsym f exec firefox-developer-edition ; mode default
  bindsym g exec gimp ; mode default
  bindsym k exec kitty --single-instance kak ; mode default
  bindsym i exec inkscape ; mode default
  bindsym l exec kitty --single-instance lf ; mode default
  bindsym m exec kitty --single-instance ncmpcpp ; mode default
  bindsym n exec kitty --single-instance node ; mode default
  bindsym s exec flameshot gui ; mode default
  bindsym u exec chromium ; mode default
  bindsym v exec kitty --single-instance nvim ; mode default

  bindsym Return mode default
  bindsym Escape mode default
}

bindsym $mod+m mode $musicmode
set $musicmode "music: [hp]rev [ln]ext [t]oggle [r]andom [f]av [y]outube"
mode $musicmode {
  bindsym h exec "mpc prev"
  bindsym p exec "mpc prev"
  bindsym l exec "mpc next"
  bindsym n exec "mpc next"
  bindsym t exec "mpc toggle"
  bindsym r exec "mpc random"
  bindsym f exec mpd-fav
  bindsym y exec mpd-youtube; mode default

  bindsym Return mode default
  bindsym Escape mode default
}

# https://cgit.freedesktop.org/xorg/proto/x11proto/tree/XF86keysym.h
# sound F1-F4
bindsym XF86AudioMute exec "amixer set Master toggle"
bindsym XF86AudioLowerVolume exec "amixer set Master 3%-"
bindsym XF86AudioRaiseVolume exec "amixer set Master 3%+"
bindsym XF86AudioMicMute exec "amixer set Mic toggle"

bindsym XF86AudioPrev exec "mpc prev"
bindsym XF86AudioPlay exec "mpc toggle"
bindsym XF86AudioNext exec "mpc next"

bindsym $mod+Delete mode $i3mode
set $i3mode "i3: [c]onfig [d]oc [q]uit [l]ock [b]ar b[o]rder [g]aps [r]esize"
mode $i3mode {
  bindsym Delete reload; restart
  # also $mod+F2
  bindsym c exec kitty --single-instance 'kak' '~/.config/i3/config' ; mode default
  # also $mod+F1
  bindsym d exec firefox-developer-edition 'https://i3wm.org/docs/userguide.html' ; mode default
  bindsym q exit

  bindsym l --release exec i3lock --no-unlock-indicator --image ~/images/wallpapers/bsod.png ; mode default

  # sub-modes
  bindsym b mode $barmode ; bar mode dock;
  bindsym o mode $bordermode
  bindsym g mode $gapsmode
  bindsym r mode $resizemode

  # monitors
  bindsym 1 exec mons -o ; mode default
  bindsym 2 exec mons -e top ; mode default

  bindsym Return mode default
  bindsym Escape mode default
}

# https://i3wm.org/docs/userguide.html#_display_mode
set $barmode "bar: [d]ock [h]ide [i]nvisible [t]oggle"
mode $barmode {
  # always visible
  bindsym d bar mode dock;
  # appear on pressing $mod or emergency
  bindsym h bar mode hide;
  # always invisible
  bindsym i bar mode invisible;
  # toggle between dock and hide modes
  bindsym t bar mode toggle;

  # hidden_state only works when in hide mode
  bindsym a bar hidden_state hide;
  bindsym s bar hidden_state show;
  # toggle between show and hide hidden_state
  bindsym y bar hidden_state toggle;

  bindsym Return mode default
  bindsym Escape mode default
}

set $resizemode "resize: [1-0] size [hjkl]"
mode $resizemode {
  bindsym $mod+h focus left
  bindsym $mod+j focus down
  bindsym $mod+k focus up
  bindsym $mod+l focus right

  # Resize the border in the desired direction.
  bindsym h       resize grow   left 1 px or 1 ppt
  bindsym Shift+h resize shrink left 1 px or 1 ppt
  bindsym j       resize grow   down 1 px or 1 ppt
  bindsym Shift+j resize shrink down 1 px or 1 ppt
  bindsym k       resize grow   up 1 px or 1 ppt
  bindsym Shift+k resize shrink up 1 px or 1 ppt
  bindsym l       resize grow   right 1 px or 1 ppt
  bindsym Shift+l resize shrink right 1 px or 1 ppt

  bindsym Left  resize shrink width 1 px or 1 ppt
  bindsym Down  resize shrink height 1 px or 1 ppt
  bindsym Up    resize grow   height 1 px or 1 ppt
  bindsym Right resize grow   width 1 px or 1 ppt

  bindsym 1 resize set width 10 ppt
  bindsym 2 resize set width 20 ppt
  bindsym 3 resize set width 30 ppt
  bindsym 4 resize set width 40 ppt
  bindsym 5 resize set width 50 ppt
  bindsym 6 resize set width 60 ppt
  bindsym 7 resize set width 70 ppt
  bindsym 8 resize set width 80 ppt
  bindsym 9 resize set width 90 ppt

  bindsym q resize set height 10 ppt
  bindsym w resize set height 20 ppt
  bindsym e resize set height 30 ppt
  bindsym r resize set height 40 ppt
  bindsym t resize set height 50 ppt
  bindsym y resize set height 60 ppt
  bindsym u resize set height 70 ppt
  bindsym i resize set height 80 ppt
  bindsym o resize set height 90 ppt

  bindsym Return mode default
  bindsym Escape mode default
}

set $bordermode "border: [1-0] size [t]oggle"
mode $bordermode {
  bindsym 1 border pixel 1
  bindsym 2 border pixel 2
  bindsym 3 border pixel 3
  bindsym 4 border pixel 4
  bindsym 5 border pixel 5
  bindsym 6 border pixel 6
  bindsym 7 border pixel 7
  bindsym 8 border pixel 8
  bindsym 9 border pixel 9
  bindsym 0 border pixel 10
  bindsym t border toggle

  bindsym Return mode default
  bindsym Escape mode default
}

set $gapspx 0
set $gapsdeltapx 10
gaps inner $gapspx
gaps outer $gapspx
smart_gaps on

set $gapsmode "gaps: [i]nner [o]uter"
mode $gapsmode {
  bindsym i mode $gapsmodeinner
  bindsym o mode $gapsmodeouter

  bindsym Return mode default
  bindsym Escape mode default
}

set $gapsmodeinner "gaps-inner: [hl] all [jk] current [r]eset [i]nner"
mode $gapsmodeinner {
  bindsym h gaps inner all minus $gapsdeltapx
  bindsym l gaps inner all plus $gapsdeltapx

  bindsym j gaps inner current minus $gapsdeltapx
  bindsym k gaps inner current plus $gapsdeltapx

  bindsym r gaps inner all set 0

  bindsym o mode $gapsmodeouter

  bindsym Return mode default
  bindsym Escape mode default
}

set $gapsmodeouter "gaps-outer: [hl] all [jk] current [r]eset [o]uter"
mode $gapsmodeouter {
  bindsym h gaps outer all minus $gapsdeltapx
  bindsym l gaps outer all plus $gapsdeltapx

  bindsym j gaps outer current minus $gapsdeltapx
  bindsym k gaps outer current plus $gapsdeltapx

  bindsym r gaps outer all set 0

  bindsym i mode $gapsmodeinner

  bindsym Return mode default
  bindsym Escape mode default
}

# decorations
default_border pixel 2
hide_edge_borders smart
for_window [class=".*"] title_format " %title"

# dracula
set $void "#000000"
set $black "#282a36"
set $gray "#44475a"
set $white "#f8f8f2"
set $blue "#6272a4"
set $cyan "#8be9fd"
set $green "#50fa7b"
set $orange "#ffb86c"
set $pink "#ff79c6"
set $purple "#bd93f9"
set $red "#ff5555"
set $yellow "#f1fa8c"

# class                 border  bg      text    indicator child_border
client.focused          $cyan   $blue   $white  $pink     $cyan
client.focused_inactive $gray   $black  $gray   $pink     $void
client.unfocused        $gray   $black  $blue   $pink     $void
# sleep 3; echo -e '\a'
client.urgent           $red    $red    $white  $pink     $red
client.placeholder      $void   $black  $white  $void     $black
client.background       $black

# Start i3bar to display a workspace bar (plus i3status info)
bar {
  status_command i3status-rs
  mode invisible
  position top
  tray_output none
  separator_symbol "–"

  colors {
    background $black
    statusline $white
    separator  $gray

    #                  border  bg      text
    focused_workspace  $white  $cyan   $black
    active_workspace   $white  $black  $white
    inactive_workspace $gray   $black  $white
    urgent_workspace   $white  $red    $white
    binding_mode       $black  $pink   $black
  }
}
